"use strict";(self.webpackChunkaston_app=self.webpackChunkaston_app||[]).push([[598],{7047:(e,r,s)=>{s.d(r,{Z:()=>N});var t=s(5475);const n={card:"Card_card__nHCKW",head:"Card_head__P+48E",body:"Card_body__Ouj+e",btnWrap:"Card_btnWrap__dYi9S",status:"Card_status__0HipY",indicator:"Card_indicator__Urh8x",Alive:"Card_Alive__096Lt",Dead:"Card_Dead__jLnrR",unknown:"Card_unknown__c1cTY",propWrapper:"Card_propWrapper__7VraL",propTitle:"Card_propTitle__cR4JB",onLoading:"Card_onLoading__8aHTh",anim:"Card_anim__o4ZSo"};var a=s(8387),i=s(5043),o=s(579);const l=()=>(0,o.jsx)("svg",{width:"50px",height:"50px",viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{d:"M25 39.7l-.6-.5C11.5 28.7 8 25 8 19c0-5 4-9 9-9 4.1 0 6.4 2.3 8 4.1 1.6-1.8 3.9-4.1 8-4.1 5 0 9 4 9 9 0 6-3.5 9.7-16.4 20.2l-.6.5zM17 12c-3.9 0-7 3.1-7 7 0 5.1 3.2 8.5 15 18.1 11.8-9.6 15-13 15-18.1 0-3.9-3.1-7-7-7-3.5 0-5.4 2.1-6.9 3.8L25 17.1l-1.1-1.3C22.4 14.1 20.5 12 17 12z"})}),d="FavButton_btn__kajDu",c="FavButton_inFavr__XqBeO",h="FavButton_disabled__kfwut",u=e=>{let{isInFavorite:r,onTogleFavorite:s,disabled:t}=e;return(0,o.jsx)("button",{onClick:s,disabled:t,className:(0,a.A)(d,r?c:"",t?h:""),children:(0,o.jsx)(l,{})})};var p=s(7043),g=s(7359),m=s(7461),_=s(145);const v=()=>{const[e,r]=(0,i.useState)(!1);return{isOpen:e,onToggleModal:(0,i.useCallback)((()=>{r((e=>!e))}),[])}},x=e=>{const r=(0,p.GV)(m.lo),s=(0,p.GV)(m.jH),t=(0,p.GV)(m.lp),n=(0,p.GV)(m.rB),{isOpen:a,onToggleModal:o}=v(),l=(0,p.jL)(),d=(0,i.useMemo)((()=>!(!s||!s.find((r=>r===e.toString())))),[s,e]),c=(0,i.useCallback)((()=>{r?d?(l((0,g.Fy)({uid:r,cardId:e})),(0,_.hf)()):(l((0,g.xF)({uid:r,cardId:e})),(0,_.fv)()):o()}),[r,l,e,d,o]);return{favorite:{isInfavorite:d,onTogleFavorite:c,isLoading:t,isError:n},modal:{isModalOpen:a,onToggleModal:o}}};var j=s(9095),b=s(3613);const f="Modal_DialogOverlay__lum+3",w="Modal_DialogContent__BCppm",y=e=>{let{isOpen:r,toggleModal:s}=e;return(0,o.jsx)(j.bL,{open:r,onOpenChange:s,children:(0,o.jsxs)(j.ZL,{children:[(0,o.jsx)(j.hJ,{className:f}),(0,o.jsx)(j.UC,{className:w,children:(0,o.jsx)(b.b,{toggleModal:s})})]})})},N=e=>{let{name:r,status:s,gender:i,location:l,image:d,id:c}=e;const{favorite:h,modal:p}=x(c);return(0,o.jsxs)("div",{className:n.card,children:[(0,o.jsxs)("div",{children:[(0,o.jsx)(t.N_,{to:"/".concat(c),children:(0,o.jsx)("img",{src:d,alt:"character"})}),(0,o.jsxs)("div",{className:n.head,children:[(0,o.jsxs)("div",{className:n.propWrapper,children:[(0,o.jsx)("span",{className:n.propTitle,children:"Name:"}),(0,o.jsx)("p",{children:r})]}),(0,o.jsxs)("div",{className:n.status,children:[(0,o.jsx)("div",{className:(0,a.A)(n.indicator,n[s])}),(0,o.jsx)("p",{children:s})]})]}),(0,o.jsxs)("div",{className:n.body,children:[(0,o.jsxs)("div",{className:n.propWrapper,children:[(0,o.jsx)("span",{className:n.propTitle,children:"Gender:"}),(0,o.jsx)("p",{children:i})]}),(0,o.jsxs)("div",{className:n.propWrapper,children:[(0,o.jsx)("span",{className:n.propTitle,children:"Location:"}),(0,o.jsx)("p",{children:l})]})]})]}),(0,o.jsxs)("div",{className:n.btnWrap,children:[(0,o.jsx)(u,{isInFavorite:h.isInfavorite,onTogleFavorite:h.onTogleFavorite}),(0,o.jsx)(y,{isOpen:p.isModalOpen,toggleModal:p.onToggleModal})]})]})}},7203:(e,r,s)=>{s.d(r,{$:()=>n,W:()=>t});const t={required:{value:!0,message:"this field is required *"},pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"invalid email address *"}},n={required:{value:!0,message:"this filed is required *"},minLength:{value:6,message:"min-lenght of password is 6 charecters *"}}},3613:(e,r,s)=>{s.d(r,{b:()=>x});var t=s(4858);const n="SignInForm_form__a6eBx",a="SignInForm_inputsWrap__CKy10",i="SignInForm_btnWrapp__V1e3m",o="SignInForm_redirect__-zjD+",l="SignInForm_loading__N6Iwc";var d=s(3339),c=s(5959),h=s(4071),u=s(873),p=s(9732),g=s(5475),m=s(650),_=s(7203),v=s(579);const x=e=>{let{toggleModal:r}=e;const{register:s,handleSubmit:x,setValue:j,formState:{errors:b}}=(0,t.mN)(),{registerUserWithEmailAndPassword:f,loading:w,error:y}=(0,p.N)(u.j2);return(0,v.jsxs)("form",{className:n,onSubmit:x((async e=>{await f(e.login,e.password),j("login",""),j("password",""),r&&r()})),children:[(0,v.jsx)(c.f,{}),(0,v.jsxs)("div",{className:a,children:[(0,v.jsx)(m.p,{labelName:"Email",errors:b.login,disabled:w,id:"email",placeholder:"Enter your email",register:s("login",_.W)}),(0,v.jsx)(m.p,{labelName:"Password",errors:b.password,disabled:w,id:"password",type:"password",placeholder:"Enter your password",register:s("password",_.$)})]}),(0,v.jsxs)("div",{className:i,children:[(0,v.jsx)(d.$,{className:w?l:"",variant:"Primary",fill:!0,type:"submit",children:" Sign In!"}),(0,v.jsx)(g.N_,{className:o,to:"/signup",children:"Does't have an accoun yet?"})]}),y&&(0,v.jsx)(h.b,{children:y.message})]})}},4071:(e,r,s)=>{s.d(r,{b:()=>a});const t="ErrMessage_msg__wb0Tb";var n=s(579);const a=e=>{let{children:r}=e;return(0,n.jsx)("span",{className:t,children:r})}},650:(e,r,s)=>{s.d(r,{p:()=>o});var t=s(4071);const n="Input_input__xm9VQ",a="Input_inptWrap__Vx1sT";var i=s(579);const o=e=>(0,i.jsxs)("div",{className:a,children:[(0,i.jsx)("label",{htmlFor:"name",children:e.labelName}),(0,i.jsx)("input",{className:n,...e,...e.register}),e.errors&&(0,i.jsx)(t.b,{children:e.errors.message})]})},9732:(e,r,s)=>{s.d(r,{N:()=>i,z:()=>d});var t=s(3216),n=s(5043),a=s(1516);const i=e=>{const[r,s]=n.useState(),[i,o]=n.useState(!1),l=(0,t.Zp)(),{state:d}=(0,t.zy)();return{registerUserWithEmailAndPassword:n.useCallback((async(r,t)=>{o(!0),s(void 0),await(0,a.x9)(e,r,t).then((()=>{l(null!==d&&void 0!==d?d:"/")})).catch((e=>s(e))).finally((()=>o(!1)))}),[e,l,d]),loading:i,error:r}};var o=s(6032),l=s(873);const d=e=>{const[r,s]=(0,n.useState)(),[i,d]=(0,n.useState)(!1),c=(0,t.Zp)();return{registerUserWithEmailAndPassword:n.useCallback((async(r,t)=>{d(!0),s(void 0),await(0,a.eJ)(e,r,t).then((async e=>{await(0,o.BN)((0,o.H9)(l.OO,"users",e.user.uid),{name:"user",email:r,password:t,history:[],favorites:[]}),c(-1)})).catch((e=>s(e))).finally((()=>d(!1)))}),[e,c]),loading:i,error:r}}},598:(e,r,s)=>{s.r(r),s.d(r,{default:()=>N});const t="MainPage_title__Yq6-w";var n=s(1807),a=s(5043),i=Object.defineProperty,o=(e,r,s)=>(((e,r,s)=>{r in e?i(e,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[r]=s})(e,"symbol"!==typeof r?r+"":r,s),s),l=new Map,d=new WeakMap,c=0,h=void 0;function u(e){return Object.keys(e).sort().filter((r=>void 0!==e[r])).map((r=>{return"".concat(r,"_").concat("root"===r?(s=e.root)?(d.has(s)||(c+=1,d.set(s,c.toString())),d.get(s)):"0":e[r]);var s})).toString()}function p(e,r){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h;if("undefined"===typeof window.IntersectionObserver&&void 0!==t){const n=e.getBoundingClientRect();return r(t,{isIntersecting:t,target:e,intersectionRatio:"number"===typeof s.threshold?s.threshold:0,time:0,boundingClientRect:n,intersectionRect:n,rootBounds:n}),()=>{}}const{id:n,observer:a,elements:i}=function(e){const r=u(e);let s=l.get(r);if(!s){const t=new Map;let n;const a=new IntersectionObserver((r=>{r.forEach((r=>{var s;const a=r.isIntersecting&&n.some((e=>r.intersectionRatio>=e));e.trackVisibility&&"undefined"===typeof r.isVisible&&(r.isVisible=a),null==(s=t.get(r.target))||s.forEach((e=>{e(a,r)}))}))}),e);n=a.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),s={id:r,observer:a,elements:t},l.set(r,s)}return s}(s),o=i.get(e)||[];return i.has(e)||i.set(e,o),o.push(r),a.observe(e),function(){o.splice(o.indexOf(r),1),0===o.length&&(i.delete(e),a.unobserve(e)),0===i.size&&(a.disconnect(),l.delete(n))}}a.Component;var g=s(710),m=s(579);const _=e=>{let{setCurrentPage:r,hasNextPage:s,isFetching:t}=e;const{ref:n,inView:i}=function(){let{threshold:e,delay:r,trackVisibility:s,rootMargin:t,root:n,triggerOnce:i,skip:o,initialInView:l,fallbackInView:d,onChange:c}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var h;const[u,g]=a.useState(null),m=a.useRef(),[_,v]=a.useState({inView:!!l,entry:void 0});m.current=c,a.useEffect((()=>{if(o||!u)return;let a;return a=p(u,((e,r)=>{v({inView:e,entry:r}),m.current&&m.current(e,r),r.isIntersecting&&i&&a&&(a(),a=void 0)}),{root:n,rootMargin:t,threshold:e,trackVisibility:s,delay:r},d),()=>{a&&a()}}),[Array.isArray(e)?e.toString():e,u,n,t,i,o,s,d,r]);const x=null==(h=_.entry)?void 0:h.target,j=a.useRef();u||!x||i||o||j.current===x||(j.current=x,v({inView:!!l,entry:void 0}));const b=[g,_.inView,_.entry];return b.ref=b[0],b.inView=b[1],b.entry=b[2],b}();return a.useEffect((()=>{i&&s&&!t&&r()}),[i,r,s,t]),(0,m.jsx)("div",{style:{width:"100%",marginTop:"50px",display:"flex",justifyContent:"center"},ref:n,children:s?(0,m.jsx)(g.A,{color:"#36d7b7"}):null})};var v=s(2562),x=s(7047);const j="MainPageList_charList__8+Edb",b=e=>{let{data:r}=e;return(0,m.jsx)("div",{className:j,children:r.length&&r.map(((e,r)=>(0,m.jsx)(x.Z,{...e},r)))})};class f extends a.Component{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,r){console.error("Uncaught error:",e,r)}render(){const{hasError:e}=this.state;return e?(0,m.jsx)("div",{children:(0,m.jsx)("p",{children:"Seems like an error occured!"})}):this.props.children}}const w=f;var y=s(3216);const N=()=>{const[e,r]=a.useState(1),{data:s,isLoading:i,isError:o,isFetching:l}=(0,n.pm)(e);return o?(0,m.jsx)(y.C5,{to:"/error"}):(0,m.jsx)(w,{children:(0,m.jsxs)("section",{className:"section",children:[(0,m.jsx)("h1",{className:t,children:"The Rick and Morty"}),s?(0,m.jsx)(b,{data:s.cards}):null,(0,m.jsx)(_,{setCurrentPage:()=>{r((e=>e+1))},hasNextPage:null===s||void 0===s?void 0:s.hasNextPage,isFetching:l}),(0,m.jsx)(v.R,{isLoading:i})]})})}}}]);
//# sourceMappingURL=598.6cc67606.chunk.js.map