{"version":3,"file":"static/js/913.0aaa7d4f.chunk.js","mappings":"oIACA,QAA0B,4BAA1B,EAAgE,4B,aCGzD,MAAMA,EAAaC,IAA4C,IAA3C,UAAEC,GAAmCD,EAC9D,OACEE,EAAAA,EAAAA,KAAA,OAAKC,WAAWC,EAAAA,EAAAA,GAAKC,EAAiBJ,EAA6B,GAAjBI,GAAqBC,UACrEJ,EAAAA,EAAAA,KAAA,MAAAI,SAAI,0BACA,C,oGCIV,MAmDA,EAnDmBC,KACjB,MAAM,KAAEC,EAAI,UAAEP,EAAS,QAAEQ,IAAYC,EAAAA,EAAAA,KAAgBC,GAAUA,EAAMC,UAC/DC,GAAMH,EAAAA,EAAAA,IAAeI,EAAAA,IACrBC,GAAWC,EAAAA,EAAAA,MAsCjB,MAAO,CACLR,OACAP,YACAQ,UACAQ,cAxCmBC,EAAAA,EAAAA,cAClBC,IACKN,GACFE,GACEK,EAAAA,EAAAA,IAAW,CACTC,OAAQR,EACRM,MAAOA,IAGb,GAEF,CAACJ,EAAUF,IA8BXS,mBA3BwBJ,EAAAA,EAAAA,cACvBC,IACKN,IACFE,GACEQ,EAAAA,EAAAA,IAAY,CACVF,OAAQR,EACRM,MAAOA,MAGXK,EAAAA,EAAAA,MACF,GAEF,CAACT,EAAUF,IAgBXY,kBAbuBP,EAAAA,EAAAA,cAAY,KAC/BL,IACFE,GAASW,EAAAA,EAAAA,IAAab,KACtBc,EAAAA,EAAAA,MACF,GACC,CAACZ,EAAUF,IASb,E,cC3DH,QAA8B,iCAA9B,EAA0H,iCAA1H,EAAiK,yB,cCAjK,QAA6B,+BAA7B,EAAwE,8B,aCDjE,MAAMe,EAAYA,KAErB1B,EAAAA,EAAAA,KAAA,OAAK2B,QAAQ,cAAcC,KAAK,eAAeC,OAAO,MAAMC,MAAM,MAAK1B,UACrEJ,EAAAA,EAAAA,KAAA,QACE4B,KAAK,OACLG,OAAO,eACPC,cAAc,QACdC,eAAe,QACfC,YAAa,GACbC,EAAE,uCCAGC,EAAatC,IAAiC,IAAhC,MAAEmB,GAAwBnB,EACnD,MAAM,kBAAEsB,GAAsBf,IAC9B,OACEgC,EAAAA,EAAAA,MAAA,OAAKpC,UAAWE,EAAkBC,SAAA,EAChCJ,EAAAA,EAAAA,KAACsC,EAAAA,GAAI,CAACC,GAAE,gBAAAC,OAAkBvB,GAAQb,SAAE,gBAAkBa,KACtDjB,EAAAA,EAAAA,KAAA,UACEyC,QAASA,IAAMrB,EAAkBH,GACjChB,UAAWE,EAAiBC,UAE5BJ,EAAAA,EAAAA,KAAC0B,EAAS,QAER,E,cCVH,MAAMgB,EAAc5C,IAA8C,IAA7C,KAAEQ,EAAI,YAAEqC,GAA+B7C,EACjE,OACEuC,EAAAA,EAAAA,MAAA,OAAKpC,UAAWE,EAAmBC,SAAA,EACjCJ,EAAAA,EAAAA,KAAA,MAAI4C,MAAO,CAAEC,UAAW,SAAUC,aAAc,QAAS1C,SAAC,yBAG1DJ,EAAAA,EAAAA,KAAA,MAAIC,UAAWE,EAAmBC,SAC/BE,EAAKyC,KAAI,CAAC9B,EAAO+B,KAChBhD,EAAAA,EAAAA,KAACoC,EAAU,CAACnB,MAAOA,GAAY+B,QAInChD,EAAAA,EAAAA,KAACiD,EAAAA,EAAM,CAACC,SAAUP,EAAaQ,QAAQ,QAAQlD,UAAWE,EAAWC,SAAC,oBAGlE,E,wBClBV,MAmBA,EAnBoBgD,KAClB,MAAM,KAAE9C,EAAI,UAAEP,EAAS,iBAAEwB,EAAgB,QAAEhB,GAAYF,IAEvD,OAAIE,GACKP,EAAAA,EAAAA,KAACqD,EAAAA,GAAQ,CAACd,GAAI,YAIrBF,EAAAA,EAAAA,MAAA,WAASpC,UAAW,UAAUG,SAAA,EAC5BJ,EAAAA,EAAAA,KAACsD,EAAAA,EAAO,CAACvD,UAAWA,IACnBO,EAAKiD,QACJvD,EAAAA,EAAAA,KAAC0C,EAAW,CAACpC,KAAMA,EAAMqC,YAAapB,KAEtCvB,EAAAA,EAAAA,KAACH,EAAAA,EAAU,CAACE,UAAWA,MAEjB,C","sources":["webpack://aston-app/./src/shared/components/NothingYet/NothingYet.module.scss?f8c6","shared/components/NothingYet/NothingYet.tsx","shared/hooks/useHistory.ts","webpack://aston-app/./src/shared/components/HistoryList/HistoryList.module.scss?cfc0","webpack://aston-app/./src/shared/components/UI/HistoryRow/HistoryRow.module.scss?5fff","shared/icons/IconClose.tsx","shared/components/UI/HistoryRow/HistoryRow.tsx","shared/components/HistoryList/HistoryList.tsx","shared/pages/history/HistoryPage.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"NothingYet_wrapper__aACNZ\",\"visible\":\"NothingYet_visible__I5UrK\"};","import clsx from \"clsx\";\r\n\r\nimport styles from \"./NothingYet.module.scss\";\r\n\r\nexport const NothingYet = ({ isLoading }: { isLoading: boolean }) => {\r\n  return (\r\n    <div className={clsx(styles.wrapper, !isLoading ? styles.visible : \"\")}>\r\n      <h2>There is nothing yet</h2>\r\n    </div>\r\n  );\r\n};\r\n","import { useCallback } from \"react\";\r\nimport { useAppDispatch, useAppSelector } from \"../../api/redux/store\";\r\nimport {\r\n  clearHistory,\r\n  removeQuery,\r\n  setHistory,\r\n} from \"../../api/redux/thunks/history-thunk\";\r\nimport { selectUid } from \"../../api/redux/selectors\";\r\nimport {\r\n  onNotifyClearHistory,\r\n  onNotifyHistoryRemoved,\r\n} from \"../utils/notification\";\r\nconst useHistory = () => {\r\n  const { data, isLoading, isError } = useAppSelector((state) => state.history);\r\n  const uid = useAppSelector(selectUid);\r\n  const dispatch = useAppDispatch();\r\n\r\n  const addToHistory = useCallback(\r\n    (query: string) => {\r\n      if (uid) {\r\n        dispatch(\r\n          setHistory({\r\n            userId: uid,\r\n            query: query,\r\n          })\r\n        );\r\n      }\r\n    },\r\n    [dispatch, uid]\r\n  );\r\n\r\n  const removeFromHistory = useCallback(\r\n    (query: string) => {\r\n      if (uid) {\r\n        dispatch(\r\n          removeQuery({\r\n            userId: uid,\r\n            query: query,\r\n          })\r\n        );\r\n        onNotifyHistoryRemoved();\r\n      }\r\n    },\r\n    [dispatch, uid]\r\n  );\r\n\r\n  const clearUserHistory = useCallback(() => {\r\n    if (uid) {\r\n      dispatch(clearHistory(uid));\r\n      onNotifyClearHistory();\r\n    }\r\n  }, [dispatch, uid]);\r\n\r\n  return {\r\n    data,\r\n    isLoading,\r\n    isError,\r\n    addToHistory,\r\n    removeFromHistory,\r\n    clearUserHistory,\r\n  };\r\n};\r\n\r\nexport default useHistory;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"historyList\":\"HistoryList_historyList__I7lOB\",\"appearAnim\":\"HistoryList_appearAnim__-WV9j\",\"listWrapper\":\"HistoryList_listWrapper__NKbfg\",\"btn\":\"HistoryList_btn__2q2YG\"};","// extracted by mini-css-extract-plugin\nexport default {\"rowWrapper\":\"HistoryRow_rowWrapper__kGrot\",\"removeBtn\":\"HistoryRow_removeBtn__IM1GL\"};","export const IconClose = () => {\r\n  return (\r\n    <svg viewBox=\"0 0 512 512\" fill=\"currentColor\" height=\"1em\" width=\"1em\">\r\n      <path\r\n        fill=\"none\"\r\n        stroke=\"currentColor\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n        strokeWidth={32}\r\n        d=\"M368 368L144 144M368 144L144 368\"\r\n      />\r\n    </svg>\r\n  );\r\n};\r\n","import { Link } from \"react-router-dom\";\r\nimport useHistory from \"../../../hooks/useHistory\";\r\nimport styles from \"./HistoryRow.module.scss\";\r\nimport { IconClose } from \"../../../icons/IconClose\";\r\n\r\ninterface HistoryRowProps {\r\n  query: string;\r\n}\r\n\r\nexport const HistoryRow = ({ query }: HistoryRowProps) => {\r\n  const { removeFromHistory } = useHistory();\r\n  return (\r\n    <div className={styles.rowWrapper}>\r\n      <Link to={`/search?name=${query}`}>{\"/search?name=\" + query}</Link>\r\n      <button\r\n        onClick={() => removeFromHistory(query)}\r\n        className={styles.removeBtn}\r\n      >\r\n        <IconClose />\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n","import styles from \"./HistoryList.module.scss\";\r\nimport { HistoryRow } from \"../UI/HistoryRow/HistoryRow\";\r\nimport { Button } from \"../UI/Button/Button\";\r\nimport PropTypes from \"prop-types\";\r\n\r\ninterface HistoryListProps {\r\n  data: string[];\r\n  toggleClear: () => void;\r\n}\r\n\r\nexport const HistoryList = ({ data, toggleClear }: HistoryListProps) => {\r\n  return (\r\n    <div className={styles.listWrapper}>\r\n      <h1 style={{ textAlign: \"center\", marginBottom: \"40px\" }}>\r\n        Your search results\r\n      </h1>\r\n      <ul className={styles.historyList}>\r\n        {data.map((query, i) => (\r\n          <HistoryRow query={query} key={i} />\r\n        ))}\r\n      </ul>\r\n\r\n      <Button onAction={toggleClear} variant=\"Clear\" className={styles.btn}>\r\n        Clear History\r\n      </Button>\r\n    </div>\r\n  );\r\n};\r\n\r\nHistoryList.propTypes = {\r\n  data: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n  toggleClear: PropTypes.func.isRequired,\r\n};\r\n","import useHistory from \"../../hooks/useHistory\";\r\n\r\nimport { Loading } from \"../../components/Loading/Loading\";\r\nimport { HistoryList } from \"../../components/HistoryList/HistoryList\";\r\nimport { NothingYet } from \"../../components/NothingYet/NothingYet\";\r\nimport { Navigate } from \"react-router-dom\";\r\n\r\nconst HistoryPage = () => {\r\n  const { data, isLoading, clearUserHistory, isError } = useHistory();\r\n\r\n  if (isError) {\r\n    return <Navigate to={\"/error\"} />;\r\n  }\r\n\r\n  return (\r\n    <section className={\"section\"}>\r\n      <Loading isLoading={isLoading} />\r\n      {data.length ? (\r\n        <HistoryList data={data} toggleClear={clearUserHistory} />\r\n      ) : (\r\n        <NothingYet isLoading={isLoading} />\r\n      )}\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default HistoryPage;\r\n"],"names":["NothingYet","_ref","isLoading","_jsx","className","clsx","styles","children","useHistory","data","isError","useAppSelector","state","history","uid","selectUid","dispatch","useAppDispatch","addToHistory","useCallback","query","setHistory","userId","removeFromHistory","removeQuery","onNotifyHistoryRemoved","clearUserHistory","clearHistory","onNotifyClearHistory","IconClose","viewBox","fill","height","width","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","HistoryRow","_jsxs","Link","to","concat","onClick","HistoryList","toggleClear","style","textAlign","marginBottom","map","i","Button","onAction","variant","HistoryPage","Navigate","Loading","length"],"sourceRoot":""}